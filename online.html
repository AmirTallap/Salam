<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <script type="text/javascript" src="salam.js"></script>
    <script type="text/javascript">
    // const argumentsFromJS = ['arg1', 'arg2', 'arg3'];

    // try {
    //     Module.instantiateStreaming(response, info);
    //     console.log('Wasm loaded successfully');
    // } catch (error) {
    //     console.error('Failed to instantiate wasm:', error);
    // }

    // Module.arguments = argumentsFromJS;

    // Module.onRuntimeInitialized = function () {
    //     Module.callMain(Module.arguments);
    // };

    // Module.main();
    async function loadWasm() {
        try {
            const response = await fetch('output.wasm');
            const buffer = await response.arrayBuffer();

            const moduleArgs = {
                wasmBinary: buffer,
                onRuntimeInitialized: function () {
                    Module.callMain(arguments_);
                },
            };

            await Module.instantiate(moduleArgs);

            console.log('Wasm loaded successfully');
        } catch (error) {
            console.error('Failed to instantiate wasm:', error);
        }
    }

    loadWasm();
    </script>
</body>
</html>
